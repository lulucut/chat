"use strict";var send=document.getElementById("send"),Chat=function(){function n(){this.socket=null,this.init()}function t(n){l.text(n.size),n.flag?a.get(0).appendChild(i('<div class="user-log">欢迎'+n.pickname+"加入群聊！</div>")):a.get(0).appendChild(i('<div class="user-log">'+n.pickname+"离开群聊！</div>"))}function e(){c=L(".info"),l=L("#peopel"),a=L(".msg"),u=L("#pickname")}function i(n){return o.innerHTML=n,o.childNodes[0]}var s=n.prototype,o=document.createElement("div"),c=null,l=null,a=null,u=null,d=!1;return s.init=function(){var n=this;this.socket=io.connect(),this.socket.on("connect",function(){L(".loading").css({display:"none"}),L(".enter-name").css({display:"block"}),e(),n.login(),n.system()})},s.login=function(){var n=this;L("#send-name").click(function(){var t=u.val();t.trim()?n.socket.emit("login",t):c.text("your pickname can't be blank or just spaces")}),this.socket.on("loginSuccess",function(){d=!0,L("#mask").css({display:"none"})}),this.socket.on("repeat",function(){c.text("your pickname is token, please use another")})},s.system=function(){this.socket.on("system",function(n){d&&t(n)})},n}();L(window).load(function(){new Chat});