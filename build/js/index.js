"use strict";var send=document.getElementById("send"),img=new Image,Chat=function(){function n(){this.socket=null,this.init()}function e(n){a.text(n.size),n.flag?l.get(0).appendChild(i('<div class="user-in">欢迎<img class="user-img" src="images/face.jpeg" /><strong class="user-name">'+n.pickname+"</strong> 加入群聊！</div>")):l.get(0).appendChild(i('<div class="user-log">'+n.pickname+"离开群聊！</div>"))}function t(){c=L(".info"),a=L("#peopel"),l=L(".msg"),u=L("#pickname")}function i(n){return o.innerHTML=n,o.childNodes[0]}var s=n.prototype,o=document.createElement("div"),c=null,a=null,l=null,u=null,r=!1;return s.init=function(){var n=this;this.socket=io.connect(),this.socket.on("connect",function(){L(".loading").css({display:"none"}),L(".enter-name").css({display:"block"}),t(),n.login(),n.system()})},s.login=function(){var n=this;L("#send-name").click(function(){var e=u.val();e.trim()?n.socket.emit("login",e):c.text("your pickname can't be blank or just spaces")}),this.socket.on("loginSuccess",function(){r=!0,L("#mask").css({display:"none"})}),this.socket.on("repeat",function(){c.text("your pickname is token, please use another")})},s.system=function(){this.socket.on("system",function(n){r&&e(n)})},n}();L(window).load(function(){new Chat,img.src="images/face.jpeg",img.onerror=function(){this.src="images/logo.png"}});